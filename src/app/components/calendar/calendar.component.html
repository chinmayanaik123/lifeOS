<div class="calendar-container">
    <div class="scrollable-content">
        <app-stats></app-stats>
        <header class="calendar-header">
            <button (click)="previousMonth()" class="nav-btn">â®</button>
            <h2>{{ currentMonthName() }}</h2>
            <button (click)="nextMonth()" class="nav-btn">â¯</button>
        </header>

        <div class="weekdays-grid">
            <div *ngFor="let day of weekDays" class="weekday">{{ day }}</div>
        </div>
    </div>

    <div class="days-grid">
        <div *ngFor="let empty of getEmptyCells()" class="day-cell empty"></div>
        <div *ngFor="let day of calendarData()" class="day-cell" [class.today]="isToday(day.date)"
            [class.weekend]="isWeekend(day.date)"
            [class.fully-completed]="day.tasksTotal > 0 && day.tasksCompleted === day.tasksTotal"
            (click)="onDayClick(day.date)">
            <div class="day-number">{{ day.date | date:'d' }}</div>

            <div class="indicators">
                <!-- Task Dots -->
                <div class="task-dots" *ngIf="day.tasks.length > 0">
                    <div *ngFor="let task of day.tasks" class="dot" [class.completed]="task.status === 'completed'"
                        [title]="task.task.title" (click)="toggleTask(task, $event)">
                    </div>
                </div>

                <!-- Other Icons -->
                <div class="icons">
                    <span *ngIf="day.streakBroken" class="streak-broken" title="Streak Broken">âš¡</span>
                    <span *ngIf="day.hasFinanceEntry" class="finance" title="Finance Entry">ğŸ’°</span>
                    <span *ngIf="day.hasWater" class="water" title="Water Tracked">ğŸ’§</span>
                    <span *ngIf="day.hasFruit" class="fruit" title="Fruit Tracked">ğŸ</span>
                    <span *ngIf="day.hasNote" class="note" title="Note">ğŸ“</span>
                </div>
            </div>
        </div>
    </div>
</div>